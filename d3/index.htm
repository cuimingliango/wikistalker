<html>
<head>
	<title>Wikistalker - Wikipedia Article Structure Visualization sss</title>
	
	<meta name='description' content='Wikistalker - Wikipedia Article Structure Visualization'/>
	<meta name='keywords' content='wikistalker, wiki stalker, wikipedia stalker, mapping wikipedia, cybercartography, wikipedia visualization, category structure visualization, link relevance visualization, hiedegger,hyperlink ,internet,map,mapped wiki,spaciality ,wikipedia,tower of babel,visualization,processing.org, processingjs, cyberspace'/>
	<link rel="canonical" href="http://sepans.com/wikistalker" />
	
	<script type="text/javascript" src="js/d3.min.js"></script>
	<script type="text/javascript" src="js/jquery-2.0.3.min.js"></script>
	<script type="text/javascript" src="js/jquery-ui-1.10.3.custom.min.js"></script>
	<script type="text/javascript" src="js/wiki2html.js"></script>
	
	<script type="text/javascript" src="http://code.jquery.com/jquery-migrate-1.0.0.js"></script>
	<script type="text/javascript" src="https://www.gstatic.com/freebase/suggest/4_2/suggest.min.js"></script>
	
	<script type="text/javascript" src="https://raw.github.com/furf/jquery-ui-touch-punch/master/jquery.ui.touch-punch.js"></script>


	<script type="text/javascript" src="js/wikistalker.js"></script>


    <link rel="stylesheet" type="text/css" href="js/jquery-ui-1.10.3.custom.css" />
    
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/freebase/suggest/4_2/suggest.min.css" />

	<!--<script type="application/processing" src="js/framework.pde"></script>-->
	
	<style type="text/css">
		body{ font-family: arial,sans-serif;; font-size: 11px; margin: 10px; overflow-y: hidden;}
		.slider { width: 180px; margin: 5px 0 }
		.ui-slider-range { background-color: #888;
          background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,.3) 3px, rgba(255,255,255,.3) 13px);
		}
		
		#params { padding: 20px 0 0 350px;}
		#canvas_span {position: absolute;}
		.top {z-index: 100; position: absolute;   padding: 10px; width: 185px; border: 1px solid #000;}
		.top input {margin-top: 3px;}
		.top section { margin: 8px 0; display: block;}
		#article {border: 1px solid #666; height: 25px; width: 150px; padding: 3px; margin-bottom: 5px;}
		#rel-val {font-size: 14px; font-weight: bold;}
		.radio {vertical-align: middle; }
		.btn { border: 1px solid black; padding: 5px 3px; cursor: pointer; background-color: #DDD;}
		.btn:hover {background-color: #CCC;}
		#tooltip {z-index: 100; position: absolute; width: 250px; background: none; max-height: 300px; overflow: hidden; 
			/*border: 1px solid #9FBFA7;*/ }
		#tooltip img {display: block;  border: 1px solid black;margin: 5px auto;}
		#tooltip a { color: #000;}
		#center {z-index: 100; position: absolute; top: 420px; left: 450px;}
		.top_nav {z-index: 100; position: absolute; top: 380; left: 480; width: 200px;}
		
		#loading {z-index: 200; position: absolute; top: 350px; left: 380px; width: 250px; height: 100px; background-color: rgba(255,255,255,0.6); }
		#loading img { margin: 20px auto; display: block;}

		#small-loading {z-index: 200; position: absolute; top: 520px; left: 870px; width: 200px; height: 90px; background-color: rgba(255,255,255,0.6); display:none; }
		#small-loading img { margin: 20px auto; display: block;}
		
		#define-menu img {margin: 20px 80px; z-index: 90;}
		a {color: #666;text-decoration: none;}
		.right {float: right}
		.power {position: fixed; bottom: 10px; left: 10px;font-size: 12px; float: right; z-index: 200;  }
		#wiki_content { position: absolute; z-index: 250; width: 500px; min-height: 15px; max-height: 680px; overflow-y: auto; overflow-x: hidden; top: 50px; left: 830px;  background-color: #FFF; opacity: 0.9; padding: 10px; display: none; border: 1px solid #000;}
		#wiki_content .close {}
		#wiki_content a { color: #000;}
		#wiki_content a:hover { text-decoration: underline; }
		
		.close {display: block; color: #000; text-align: center; border: 1px solid black; padding: 1px 2px 3px 2px; cursor: pointer; width: 10px; height: 10px;
		position: absolute; top: 7px; right: 7px;}
		
		#top_nav {position: absolute; top: 10px; left: 225px; z-index: 300; background-color: #FFF; border: 1px solid #000; width: 100%; opacity: .8;
padding: 10px;}
		#top_nav a {color: #000; margin-right: 15px; padding: 2px 5px 10px;}
		
		.tab {border-bottom: 1px solid #FFF; border-top: 1px solid black; border-right: 1px solid black; border-left: 1px solid black;}
		
		
		#wiki_text  { max-height: 700px; overflow: auto;}
		#wiki_text a {color: #000; }
		
		#history_canvas {z-index:250;display:none; position: absolute; top:100; left: 270;}
		#define-menu a { color: #000; font-size: 12px; font-weight: bold;}
		.top h1 {margin:0; color: #000; width: 100%; font-size: 16px; padding: 0;}
		#help {  position: fixed; top: 245px; left: 30px; border: 1px solid #000; z-index: 200;
		width: 600px; background-color: #fff; padding: 10px; font-size: 12px; display: none; opacity: 0.95;}
		#help b { color: #000; background-color: #CCC; padding: 2px; font-weight: normal;}
		#heip a { text-decoration: underline; color: #000; }
		#help h2 { }
		.disabling {position: absolute; top: 0; left: 0; width:100%; height: 100%; z-index: 1000; display:none; background-color: #FFF; opacity: 0.5; }
		#tip {position: fixed; top: 80px; left: 270px; padding: 5px; z-index: 500; font-size: 10px; 
			color: #444; border: 1px solid #444; width: 200px; display: none; background: #FFF; opacity: .8;}
		#tip .message {color: #00BBBB;}
		#rel-slider { border-radius: 0px; border: 1px solid black; height: 10px; }
		#rel-slider a { border-radius: 1px; border: 1px solid black; background: #000;}
		
		#d3 { position: absolute; top: 0px; left: 100px;}


		.small-svg .bar, .small-svg .bar:hover  { cursor: default;}


		.bar rect { fill: #111;}
		.bar:hover rect { fill: #bbb; width: 10px;}
		
		.bar:hover {width: 10px; cursor: pointer;}
		.bar text { fill: #ccc; fill-opacity: 0;}
		.bar:hover .text { fill: #000;  fill-opacity: 1 !important;}
		
		.preview p { margin: 0; }
		.preview {background: url('img/arrow.png') 165px 4px no-repeat; padding-right: 40px; width: 180px; cursor: pointer;}
		.preview:hover b {text-decoration: underline;}
		.preview-circle { cursor: pointer;}
		
		.li.fbs-item { border-color: #aaa;}
		.fbs-item-name { background-color: #FFF; border-color: #aaa; }
		li.fbs-selected .fbs-item-name {border-color: #000; color: #000;}
		
		.history-container { position: absolute; top: 50px; left: 124px; background-color: rgba(255,255,255,0.98); border: 1px solid #aaa; z-index: 100; display: none;}
		.history-container .bar, .history-container .bar:hover {cursor: default;}
		.history-container .close { }
		
		
	</style>

</head>
<body>
	<div id="top_nav">
		<!--
		<a href="#" id="linkViewLink" onclick="linkView();return false;" alt="Browse thtough entries">Navigate</a>
		<a href="#" id="categoryViewLink" onclick="categoryView();">Category Structure</a>
		-->
		<a href="#" id="navigate-view" class="tab">Browse</a>

		<a href="#" id="history-view" >History</a>

		<a href="#" id="article-view" >Show Article</a>
		
		<a href="#">[Visualization of semantic relevance between hyperlinked Wikipedia entries.]</a> 
		<!--
		<a href="" id="setting_link">Link to this setting</a>

		<a href="#" onclick="$('#help').show();return false;">About</a>
		-->

	</div>
	<div class="top">
		<div class="disabling" id="top-disabler" style="display:none"></div>
		<h1>Wikistalker</h1>
		<section>
			<label for="title">Artile Title: </label><input id="article" type="text" size="30" value="Jorge Luis Borges"/> <input type="button" class="btn" id="go-button" value="Go!"></input>
		</section>
		<section>
			Relevance cut off: <span id="rel-val" >50%</span>  <div id="rel-slider" class="slider"> </div>
		</section>
		<section>
			<div><label>Sort By:</lable> <br>
					<label for="relatedness">Relatedness </label><input type="radio" name="sort" value="relatedness" class="radio" />
					<label for="title">Title </label><input type="radio" name="sort" value="title" class="radio"  checked="true"/>
			</div>
		</section>
	</div>
	<div id="tip">
		Tip: <span class="message">Click on 'Navigation View' to enable controls and navigate</span>
		<a style="float:right; border: 1px solid #666; padding: 2px;" alt="close" href="#" onclick="$('#tip').hide();">X</a>
	</div>
	<div id="tooltip-container">
		<div id="tooltip"></div>
		<div id="define-menu" class="top_nav" style="display:none">
		
			<a href="#" onclick="changeArticleById(hover);return false;">Navigate to Entry >></a>  <a href="#" class="right" onclick="lock=false;showTooltip(articleId, $('#center'),null);return false;">X Cancel</a>
		
		</div>
	</div>
	<div id="center"></div>
	
	<div id="loading">
	    <img src="img/loading.gif">
	</div>
	<div id="small-loading">
	    <img src="img/loading.gif">
	</div>

	<input type="hidden" id="article-id" value="15781"/>



	<div id="help">
		<a href="#" style="float: right" onclick="$('#help').hide();">close this!</a>
		<h2>About Wikistalker</h2>
		<p><a title="Try Wikistalker" href="../../wikistalker" target="_blank">Wikistalker</a>, inspired by &#8216;<a href="http://www.visualcomplexity.com/vc/project_details.cfm?index=7&amp;id=7&amp;domain" target="_blank">Web Stalker</a>&#8216;, is a way of understanding a concept by only seeing the  visualization of the meta-structure of its Wikipedia article.</p>
<p>In this visualization, a &#8216;sun&#8217; in generated for each article. Each ray  represents an  <b>out-going link</b>. The length of each link shows the <b>semantic relevance</b>  between those two linked articles based on &#8216;<a href="http://wikipedia-miner.cms.waikato.ac.nz/" target="_blank">Wikipedia Miner</a>&#8216; measures.</p>

<p>In the middle, in the <b>category view</b> tab, Wikistalker illustrates how  links are related to the main entry based on how many categories they  have in common. The category view mesh shows which links are  ontologically related versus rays that show semantic relevance.</p>
<p>In <b>Navigation View</b> tab a short description appears in the middle and you can navigate in Wikistalker by clicking on links.</p>
<p>This project is implemented in <b>HTML5</b> using <a href="http://processingjs.org" target="_new">processingjs</a> and raphaeljs.</p>
		<p>You can filter links by their relatedness using the <b>sliding bar</b> and sort them <b>alphabetically</b> or by <b>relevance</b>. </p>
		<p><b>Circles</b> on the end of the links are for articles that are mutually linked.</p>
	</div>
	
	<span class="power">By <a href="http://sepans.com" target="_new">sepans</a> and <a href="http://raschin.com" target="_new">raschin</a> Powered by <a href="http://wikipedia-miner.cms.waikato.ac.nz/" target="_new">Wikipedia Miner</a></span>

    <div id="d3"></div>

    
    <div id="wiki_content"><a href="#" class="close">X</a><div class="wiki"></div></div>
    
	<script type="text/javascript">
	
	
	$(document).ready(function() { 


        var wikistalker = new Wikistalker({title:'borges', container: '#d3', width: 800, height: 800, innerCircleR: 160});  

    
        $('#article').suggest({zIndex: 400, animate: true, xhr_delay : 500, callback: 'suggestCallback' });
        
        $('#article').change(function() {
            setTimeout(function() {
                $('.small-svg').hide();
                $('.preview').hide();
                console.log($('#article').val().replace(/\ /g,'%2B'));
                wikistalker.changeArticle(null,$('#article').val().replace(/\ /g,'%2B'));
            },200);

        });
        
        $('#wiki_content .close').click(function() {
            $('#wiki_content').slideUp();
            return false;
        });
        


    //   var wikistalker2 = new Wikistalker({title:'tehran', container: '#d4'});  
       
      /* 
       setTimeout(function() {
            wikistalker.changeRelevanceCutoff(0.6);
       },5000);
    */
        
        $('#history-view').click(function() {
            wikistalker.makeHistory();
            $('.history-container').show();
            $(this).addClass('tab');
            $('#navigate-view').removeClass('tab');
            
        
        });

        $('#navigate-view').click(function() {
            
            $('.history-container').hide();
            $(this).addClass('tab');
            $('#history-view').removeClass('tab');
        
        });
    
        $("#rel-slider" ).slider({max: 100, value: 50,min: 1, range: "max",
            slide: function(event, ui) {
                
                wikistalker.changeRelevanceCutoff(ui.value/100);
                $('#rel-val').text(ui.value+'%');
           }
        });
        
        $('#go-button').click(function() {
            wikistalker.changeArticle(null,$('#article').val().replace(/\ /g,'%2B'));
        });
        $('.radio').click(function() {

              wikistalker.changeSortMethod($(this).val());
        });
        
        $('#article-view').click(function() {
            var id = $('#article-id').val();
            var url = '/proxy.php?proxy_url='+'http://en.wikipedia.org/w/api.php?action=query%26prop=revisions%26rvprop=content%26format=json%26pageids='+id;
            console.log(url);
            $('#wiki_content .wiki').html('');
            $('#wiki_content').show();
            $('#wiki_content .wiki').hide();
            $.getJSON(url, function(data) {
                
                var content = data.query.pages[id].revisions[0]['*'];
                var htmlOutput = content.wiki2html();
				var regex = /\{\{([^}]+)\}\}/g;
				//console.log( htmlOutput.replace(regex, ''));


				htmlOutput = htmlOutput.replace(regex, '');
				htmlOutput = htmlOutput.replace(/\|/g,'* ');

                $('#wiki_content .wiki').html(htmlOutput);

                $('#wiki_content .wiki a').click(function() {return false;});
                
                $('#wiki_content .wiki').slideDown();
                

            });
        });

    });
    
    
    
    
    




	</script>
	




</body>
</html>